/*!
 * stroll.js 1.2 - CSS scroll effects
 * http://lab.hakim.se/scroll-effects
 * MIT licensed
 *
 * Copyright (C) 2012 Hakim El Hattab, http://hakim.se
 */
!function(){"use strict";function t(){if(r){requestAnimFrame(t);for(var e=0,s=c.length;s>e;e++)c[e].update()}}function e(e,o){if(!e.nodeName||/^(ul|ol)$/i.test(e.nodeName)===!1)return!1;i(e)&&s(e);var h=l?new n(e):new a(e);o&&o.live&&(h.syncInterval=setInterval(function(){h.sync.call(h)},u)),h.sync(),c.push(h),1===c.length&&(r=!0,t())}function s(t){for(var e=0;e<c.length;e++){var s=c[e];s.element==t&&(s.destroy(),c.splice(e,1),e--)}0===c.length&&(r=!1)}function i(t){for(var e=0,s=c.length;s>e;e++)if(c[e].element==t)return!0;return!1}function o(t,e,s){var i,o;if("string"==typeof t){var h=document.querySelectorAll(t);for(i=0,o=h.length;o>i;i++)e.call(null,h[i],s)}else if("object"==typeof t&&"number"==typeof t.length)for(i=0,o=t.length;o>i;i++)e.call(null,t[i],s);else{if(!t.nodeName)throw"Stroll target was of unexpected type.";e.call(null,t,s)}}function h(){return!!document.body.classList}function a(t){this.element=t}function n(t){this.element=t,this.element.style.overflow="hidden",this.top={value:0,natural:0},this.touch={value:0,offset:0,start:0,previous:0,lastMove:Date.now(),accellerateTimeout:-1,isAccellerating:!1,isActive:!1},this.velocity=0}var u=500,l=!!("ontouchstart"in window),c=[],r=!1;a.prototype.sync=function(){this.items=Array.prototype.slice.apply(this.element.children),this.listHeight=this.element.offsetHeight;for(var t=0,e=this.items.length;e>t;t++){var s=this.items[t];s._offsetHeight=s.offsetHeight,s._offsetTop=s.offsetTop,s._offsetBottom=s._offsetTop+s._offsetHeight,s._state=""}this.update(!0)},a.prototype.update=function(t){var e=this.element.pageYOffset||this.element.scrollTop,s=e+this.listHeight;if(e!==this.lastTop||t){this.lastTop=e;for(var i=0,o=this.items.length;o>i;i++){var h=this.items[i];h._offsetBottom<e?"past"!==h._state&&(h._state="past",h.classList.add("past"),h.classList.remove("future")):h._offsetTop>s?"future"!==h._state&&(h._state="future",h.classList.add("future"),h.classList.remove("past")):h._state&&("past"===h._state&&h.classList.remove("past"),"future"===h._state&&h.classList.remove("future"),h._state="")}}},a.prototype.destroy=function(){clearInterval(this.syncInterval);for(var t=0,e=this.items.length;e>t;t++){var s=this.items[t];s.classList.remove("past"),s.classList.remove("future")}},n.prototype=new a,n.prototype.sync=function(){this.items=Array.prototype.slice.apply(this.element.children),this.listHeight=this.element.offsetHeight;for(var t,e=0,s=this.items.length;s>e;e++)t=this.items[e],t._offsetHeight=t.offsetHeight,t._offsetTop=t.offsetTop,t._offsetBottom=t._offsetTop+t._offsetHeight,t._state="",t.style.opacity=1;this.top.natural=this.element.scrollTop,this.top.value=this.top.natural,this.top.max=t._offsetBottom-this.listHeight,this.update(!0),this.bind()},n.prototype.bind=function(){var t=this;this.touchStartDelegate=function(e){t.onTouchStart(e)},this.touchMoveDelegate=function(e){t.onTouchMove(e)},this.touchEndDelegate=function(e){t.onTouchEnd(e)},this.element.addEventListener("touchstart",this.touchStartDelegate,!1),this.element.addEventListener("touchmove",this.touchMoveDelegate,!1),this.element.addEventListener("touchend",this.touchEndDelegate,!1)},n.prototype.onTouchStart=function(t){if(t.preventDefault(),1===t.touches.length)if(this.touch.isActive=!0,this.touch.start=t.touches[0].clientY,this.touch.previous=this.touch.start,this.touch.value=this.touch.start,this.touch.offset=0,this.velocity){this.touch.isAccellerating=!0;var e=this;this.touch.accellerateTimeout=setTimeout(function(){e.touch.isAccellerating=!1,e.velocity=0},500)}else this.velocity=0},n.prototype.onTouchMove=function(t){if(1===t.touches.length){var e=this.touch.value;this.touch.value=t.touches[0].clientY,this.touch.lastMove=Date.now();var s=this.touch.value>this.touch.previous&&this.velocity<0||this.touch.value<this.touch.previous&&this.velocity>0;this.touch.isAccellerating&&s?(clearInterval(this.touch.accellerateTimeout),this.velocity+=(this.touch.previous-this.touch.value)/10):(this.velocity=0,this.touch.isAccellerating=!1,this.touch.offset=Math.round(this.touch.start-this.touch.value)),this.touch.previous=e}},n.prototype.onTouchEnd=function(t){var e=this.touch.start-this.touch.value;this.touch.isAccellerating||(this.velocity=(this.touch.start-this.touch.value)/10),(Date.now()-this.touch.lastMove>200||Math.abs(this.touch.previous-this.touch.value)<5)&&(this.velocity=0),this.top.value+=this.touch.offset,this.touch.offset=0,this.touch.start=0,this.touch.value=0,this.touch.isActive=!1,this.touch.isAccellerating=!1,clearInterval(this.touch.accellerateTimeout),(Math.abs(this.velocity)>4||Math.abs(e)>10)&&t.preventDefault()},n.prototype.update=function(t){var e=this.top.value+this.velocity+this.touch.offset;if((this.velocity||this.touch.offset)&&(this.element.scrollTop=e,e=Math.max(0,Math.min(this.element.scrollTop,this.top.max)),this.top.value=e-this.touch.offset),(!this.touch.isActive||this.touch.isAccellerating)&&(this.velocity*=.95),Math.abs(this.velocity)<.15&&(this.velocity=0),e!==this.top.natural||t){this.top.natural=e,this.top.value=e-this.touch.offset;for(var s=e+this.listHeight,i=0,o=this.items.length;o>i;i++){var h=this.items[i];h._offsetBottom<e?this.velocity<=0&&"past"!==h._state&&(h.classList.add("past"),h._state="past"):h._offsetTop>s?this.velocity>=0&&"future"!==h._state&&(h.classList.add("future"),h._state="future"):h._state&&("past"===h._state&&h.classList.remove("past"),"future"===h._state&&h.classList.remove("future"),h._state="")}}},n.prototype.destroy=function(){a.prototype.destroy.apply(this),this.element.removeEventListener("touchstart",this.touchStartDelegate,!1),this.element.removeEventListener("touchmove",this.touchMoveDelegate,!1),this.element.removeEventListener("touchend",this.touchEndDelegate,!1)},window.stroll={bind:function(t,s){h()&&o(t,e,s)},unbind:function(t){h()&&o(t,s)}},window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}()}(),function(){"use strict";stroll.bind($(".gallery-container ul"))}();